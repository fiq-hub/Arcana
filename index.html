<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>semangat ngitung sms</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-12 text-center">
            <h1 class="text-4xl font-bold text-indigo-600 mb-2">semangat ngitung sms y</h1>
            <p class="text-gray-600">dibikin mas mas baik hati bernama taufiq biar enak aja</p>
        </header>
        <div class="flex justify-center gap-4 mb-8">
            <button id="addTimerBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg shadow-md flex items-center gap-2 transition-all">
                <i data-feather="plus"></i>
                Add New Timer
            </button>
            <button id="resetAllBtn" class="bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-lg shadow-md flex items-center gap-2 transition-all">
                <i data-feather="rotate-ccw"></i>
                Reset All
            </button>
        </div>
<div id="timersContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Timers will be added here dynamically -->
        </div>
    </div>

    <script src="components/timer-card.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();
    </script>
<script src="https://huggingface.co/deepsite/deepsite-badge.js"></script>
</body>
</html>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
body {
    font-family: 'Inter', sans-serif;
    position: relative;
    overflow: hidden;
}

.floating-bg {
    position: absolute;
    width: 300px;
    height: 300px;
    opacity: 0.7;
    background-image: url('https://i.imgur.com/X5wFZaH.png');
    background-size: cover;
    border-radius: 50%;
    filter: blur(1px);
    z-index: -1;
    animation: float 15s infinite linear;
}

@keyframes float {
    0% {
        transform: translate(0, 0) rotate(0deg);
    }
    25% {
        transform: translate(100vw, 50vh) rotate(90deg);
    }
    50% {
        transform: translate(50vw, 80vh) rotate(180deg);
    }
    75% {
        transform: translate(80vw, 20vh) rotate(270deg);
    }
    100% {
        transform: translate(0, 0) rotate(360deg);
    }
}
.timer-card {
    transition: all 0.3s ease;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(5px);
}
.timer-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}

.time-display {
    font-family: 'Courier New', monospace;
}

/* Animation for active timers */
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(79, 70, 229, 0); }
    100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); }
}

.active-timer {
    animation: pulse 2s infinite;
}
</style>
<script>
    
document.addEventListener('DOMContentLoaded', () => {
    // Create floating background elements
    for (let i = 0; i < 3; i++) {
        const bg = document.createElement('div');
        bg.className = 'floating-bg';
        bg.style.left = `${Math.random() * 100}%`;
        bg.style.top = `${Math.random() * 100}%`;
        bg.style.animationDuration = `${15 + Math.random() * 15}s`;
        bg.style.animationDelay = `${Math.random() * 5}s`;
        document.body.appendChild(bg);
    }

    const timersContainer = document.getElementById('timersContainer');
const addTimerBtn = document.getElementById('addTimerBtn');
    const resetAllBtn = document.getElementById('resetAllBtn');
// Initialize with 5 timers
    for (let i = 1; i <= 5; i++) {
        addNewTimer(`Timer ${i}`);
    }
    addTimerBtn.addEventListener('click', () => {
        const timerCount = document.querySelectorAll('timer-card').length + 1;
        addNewTimer(`Timer ${timerCount}`);
    });

    resetAllBtn.addEventListener('click', () => {
        const timers = document.querySelectorAll('timer-card');
        timers.forEach(timer => {
            timer.resetTimer();
        });
    });
function addNewTimer(initialName) {
        const timerCard = document.createElement('timer-card');
        timerCard.setAttribute('name', initialName);
        timersContainer.appendChild(timerCard);
    }
});
</script>
<script>
class TimerCard extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({ mode: 'open' });
        this._name = 'Timer';
        this._time = 0;
        this._isRunning = false;
        this._interval = null;
        this._lapTimes = [];
    }

    static get observedAttributes() {
        return ['name'];
    }

    attributeChangedCallback(name, oldValue, newValue) {
        if (name === 'name') {
            this._name = newValue;
            this.render(); // render kembali ketika atribut berubah
        }
    }

    connectedCallback() {
        this.render();
    }

    disconnectedCallback() {
        if (this._interval) {
            clearInterval(this._interval);
        }
    }

    formatTime(ms) {
        const date = new Date(ms);
        const hours = date.getUTCHours().toString().padStart(2, '0');
        const minutes = date.getUTCMinutes().toString().padStart(2, '0');
        const seconds = date.getUTCSeconds().toString().padStart(2, '0');
        const milliseconds = Math.floor(date.getUTCMilliseconds() / 10).toString().padStart(2, '0');
        return `${hours}:${minutes}:${seconds}.${milliseconds}`;
    }

    startTimer() {
        if (this._isRunning) return;
        this._isRunning = true;
        const startTime = Date.now() - this._time;
        this._interval = setInterval(() => {
            this._time = Date.now() - startTime;
            const display = this.shadowRoot.querySelector('.time-display');
            if (display) display.textContent = this.formatTime(this._time);
        }, 10);
        const card = this.shadowRoot.querySelector('.timer-card');
        if (card) card.classList.add('active-timer');
    }

    stopTimer() {
        if (!this._isRunning) return;
        clearInterval(this._interval);
        this._isRunning = false;
        const card = this.shadowRoot.querySelector('.timer-card');
        if (card) card.classList.remove('active-timer');
    }

    resetTimer() {
        this.stopTimer();
        this._time = 0;
        this._lapTimes = [];
        const display = this.shadowRoot.querySelector('.time-display');
        if (display) display.textContent = this.formatTime(0);
        const laps = this.shadowRoot.querySelector('.laps-container');
        if (laps) laps.innerHTML = '';
    }

    recordLap() {
        if (!this._isRunning) return;
        this._lapTimes.unshift({
            time: this._time,
            display: this.formatTime(this._time)
        });
        this.renderLaps();
    }

    renderLaps() {
        const lapsContainer = this.shadowRoot.querySelector('.laps-container');
        if (!lapsContainer) return;
        lapsContainer.innerHTML = '';
        this._lapTimes.forEach((lap, index) => {
            const lapElement = document.createElement('div');
            lapElement.className = 'flex justify-between py-2 border-b border-gray-200';
            lapElement.innerHTML = `
                <span class="text-gray-600">Lap ${this._lapTimes.length - index}</span>
                <span class="font-mono">${lap.display}</span>
            `;
            lapsContainer.appendChild(lapElement);
        });
    }

    setupEventListeners() {
        // Pastikan elemen ada
        const startBtn = this.shadowRoot.querySelector('.start-btn');
        const stopBtn = this.shadowRoot.querySelector('.stop-btn');
        const resetBtn = this.shadowRoot.querySelector('.reset-btn');
        const lapBtn = this.shadowRoot.querySelector('.lap-btn');
        const nameInput = this.shadowRoot.querySelector('.name-input');

        // Karena render membuat ulang DOM, kita pasang listener tiap render.
        // Tidak perlu menghapus listener lama karena node lama sudah hilang.
        if (startBtn) startBtn.addEventListener('click', () => this.startTimer());
        if (stopBtn) stopBtn.addEventListener('click', () => this.stopTimer());
        if (resetBtn) resetBtn.addEventListener('click', () => this.resetTimer());
        if (lapBtn) lapBtn.addEventListener('click', () => this.recordLap());
        if (nameInput) {
            nameInput.addEventListener('change', (e) => {
                this._name = e.target.value;
                this.setAttribute('name', this._name);
            });
        }
    }

    render() {
        this.shadowRoot.innerHTML = `
            <style>
                :host { display: block; margin-bottom: 1.5rem; }
                .timer-card { background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
                .timer-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
                .name-input { border: none; font-size:1.25rem; font-weight:600; color:#4f46e5; background:transparent; border-bottom:2px solid transparent; padding:0.25rem 0; width:70%; }
                .name-input:focus { outline:none; border-bottom-color:#4f46e5; }
                .time-display { font-size:2.5rem; text-align:center; margin:1.5rem 0; color:#1f2937; font-family: monospace; }
                .controls { display:flex; gap:0.5rem; margin-bottom:1.5rem; }
                button { flex:1; padding:0.5rem; border-radius:0.5rem; font-weight:500; display:flex; align-items:center; justify-content:center; gap:0.5rem; transition: all 0.2s; cursor:pointer; border:none; }
                .start-btn { background-color:#10b981; color:white; }
                .stop-btn { background-color:#ef4444; color:white; }
                .reset-btn { background-color:#f59e0b; color:white; }
                .lap-btn { background-color:#3b82f6; color:white; }
                .laps-title { font-weight:600; margin-bottom:0.5rem; color:#4b5563; }
                .laps-container { max-height:200px; overflow-y:auto; }
            </style>

            <div class="timer-card">
                <div class="timer-header">
                    <input type="text" class="name-input" value="${this._name}" maxlength="20">
                    <i data-feather="edit-2" class="text-indigo-500"></i>
                </div>

                <div class="time-display">${this.formatTime(this._time)}</div>

                <div class="controls">
                    <button class="start-btn"><i data-feather="play"></i> Start</button>
                    <button class="stop-btn"><i data-feather="pause"></i> Stop</button>
                    <button class="reset-btn"><i data-feather="rotate-ccw"></i> Reset</button>
                    <button class="lap-btn"><i data-feather="flag"></i> Lap</button>
                </div>

                <div class="laps-title">Lap Times</div>
                <div class="laps-container"></div>
            </div>
        `;

        // replace feather icons inside shadowRoot
        // feather.replace() works on document; for shadowRoot we need to manually set svg.
        // Simpler: render minimal icons or skip; but if you want feather in shadow, do this:
        const icons = this.shadowRoot.querySelectorAll('i[data-feather]');
        icons.forEach(i => {
            const name = i.getAttribute('data-feather');
            // create simple fallback svg using feather (if available globally)
            if (window.feather && typeof window.feather.toSvg === 'function') {
                i.outerHTML = window.feather.toSvg(name);
            } else {
                i.textContent = ''; // fallback
            }
        });

        // Pasang event listener setelah render() â€” ini yang penting
        this.setupEventListeners();
    }
}

customElements.define('timer-card', TimerCard);
</script>
